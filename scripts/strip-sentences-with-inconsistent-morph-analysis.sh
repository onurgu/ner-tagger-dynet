#!/usr/bin/env bash

#awk 'BEGIN { found_in_sentence = 0; } /^$/ { if (found_in_sentence == 1) { print sentence; }; found_in_sentence = 0; sentence = ""; } !/^$/ { if (length(sentence) == 0) { sentence = $0 "\n"; } else { sentence = sentence $0 "\n";}; if (found_in_sentence == 0) { inconsistent = 1; for (i = 3; i <= NF-1; i++) { if ($2 == $i) { inconsistent = 0 } }; if (inconsistent == 1) { found_in_sentence = 1 } } }'
awk 'BEGIN { inconsistent_sentence = 0; } /^$/ { if (inconsistent_sentence == 0) { print sentence; }; inconsistent_sentence = 0; sentence = ""; } !/^$/ { if (length(sentence) == 0) { sentence = $0 "\n"; } else { sentence = sentence $0 "\n";}; if (inconsistent_sentence == 0) { found = 0; if (NF == 4 && $3 == "*UNKNOWN*") { inconsistent_sentence = 0; } else { for (i = 3; i <= NF-1; i++) { if ($2 == $i) { found = 1; break }; }; if (found == 1) { inconsistent_sentence = 0 } else { inconsistent_sentence = 1 };} } }'